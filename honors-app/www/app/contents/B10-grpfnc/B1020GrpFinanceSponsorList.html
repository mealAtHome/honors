<ons-page id="GFSL">

    <!-- --------------- -->
    <!-- 페이지용 타이틀 -->
    <!-- --------------- -->
    <ons-toolbar id="GFSL-toolbar">
        <div class="left"><gg-backbtn onclick="GFSL.close(true);"></gg-backbtn></div>
        <div class="center"><span id="GFSL-span-title">찬조이력</span></div>
    </ons-toolbar>

    <!-- 찬조이력 -->
    <div class="common-div-cushion">

        <!-- 타이틀 -->
        <!-- <div class="common-div-formTitle"> -->
            <!-- <span>찬조이력</span> -->
            <!-- <span class="GFSL-span-choosedPosition"></span> -->
        <!-- </div> -->

        <!-- 찬조이력 -->
        <div class="common-div-formField">
            <span>찬조이력</span>
            <span>모임의 찬조이력을 모두 표시합니다.</span>
            <div class="common-div-cushionUD">
                <button class="common-btn-inline" id="GFSL-btn-addSponsor">찬조추가</button>
            </div>
            <hr class="common-hr-padding">
            <div id="GFSL-div-list" class="common-tag-fontsize09"></div>
        </div>

    </div> <!-- common-div-cushion -->

    <script>
        var GFSL =
        {
            code : "GFSL",
            Data: {},

            /* ===================== */
            /* show */
            /* ===================== */
            show()
            {
                if(Common.isEmpty(GFSL.Data.grpno))    { Common.toast("잘못된 접근입니다."); GFSL.close(true); return; }
                if(Common.isEmpty(GFSL.Data.pagenum))  { GFSL.Data.pagenum = 1; }

                /* init */
                Common.showProgress();
                setTimeout(function()
                {
                    try
                    {
                        /* vars */
                        let grpno = GFSL.Data.grpno;
                        let pagenum = GFSL.Data.pagenum;

                        /* get list */
                        let mGrpfncSponsorships = Api.GrpfncSponsorship.selectByGrpnoPagenum(grpno, pagenum, GGF.none, GGF.toast);
                        if(mGrpfncSponsorships.isSuccess())
                        {
                            mGrpfncSponsorships.makeTable("#GFSL-div-list");
                            $("#GFSL-div-list .common-btn-pagenationBtn").click(function()
                            {
                                GFSL.Data.pagenum = $(this).attr("pagenum");
                                GFSL.show();
                            });
                        }
                    }
                    catch(e)
                    {
                        console.error(e);
                        Common.toast("오류가 발생했습니다.");
                        GFSL.close(true);
                        return;
                    }
                    finally
                    {
                        Common.hideProgress();
                    }
                }, ajaxDelayTime);
            },

            /* ========================= */
            /* close */
            /* ========================= */
            close(force=false)
            {
                if(force == true)
                {
                    Navigation.moveBack();
                    return;
                }
                Navigation.moveBack();
            },
        }

        $(document).ready(function()
        {
            /* ======================== */
            /* event */
            /* ======================== */
            $("#GFSL-btn-addSponsor").click(function() { Navigation.moveFrontPage(Navigation.Page.B1021GrpFinanceSponsorUpdate, { grpno: GFSL.Data.grpno, }); });

            /* ========================= */
            /* page process */
            /* ========================= */

            /* get data from Config */
            try
            {
                GFSL.Data = Navigation.getPageParam();
                Navigation.executeShow();
            }
            catch(e)
            {
                console.error(e);
                GFSL.close(true);
            }

        });

    </script>


</ons-page>