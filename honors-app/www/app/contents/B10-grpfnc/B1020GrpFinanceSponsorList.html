<ons-page id="GFSL">

    <!-- --------------- -->
    <!-- 페이지용 타이틀 -->
    <!-- --------------- -->
    <ons-toolbar id="GFSL-toolbar">
        <div class="left"><gg-backbtn onclick="GFSL.close(true);"></gg-backbtn></div>
        <div class="center"><span id="GFSL-span-title">찬조이력</span></div>
    </ons-toolbar>

    <!-- 찬조이력 -->
    <div class="common-div-cushion">

        <!-- 타이틀 -->
        <div class="common-div-formTitle">
            <span>찬조이력</span>
            <!-- <span class="GFSL-span-choosedPosition"></span> -->
        </div>

        <!-- 이력 전체 -->
        <div class="common-div-formField">
            <span>이력 전체</span>
            <span>모임의 찬조이력을 모두 표시합니다.</span>
            <div class="common-div-cushionUD">
                <button class="common-btn-inline" id="GFSL-btn-addSponsor">찬조추가</button>
            </div>
            <div id="GFSL-div-historyAll"></div>
        </div>

    </div> <!-- common-div-cushion -->

    <script>
        var GFSL =
        {
            code : "GFSL",
            Data: {},

            /* ===================== */
            /* show */
            /* ===================== */
            show()
            {
                if(Common.isEmpty(GFSL.Data.grpno))             { Common.toast("잘못된 접근입니다."); GFSL.close(true); return; }
                // if(Common.isEmpty(GFSL.Data.tab))               { GFSL.Data.tab = "input"; }
                // if(Common.isEmpty(GFSL.Data.historyPagenum))    { GFSL.Data.historyPagenum = 1; }

                /* init */
                Common.showProgress();
                setTimeout(function()
                {
                    try
                    {
                        // /* vars */
                        // let grpno = GFSL.Data.grpno;

                        // /* get capital */
                        // let mGrpformng = Api.Grpformng.selectByPk(grpno).getModel();
                        // if(mGrpformng == null)
                        // {
                        //     Common.toast("모임 정보를 불러올 수 없습니다.");
                        //     GFSL.close(true);
                        //     return;
                        // }

                        // /* init html */
                        // $("#GFSL-input-capital").val(mGrpformng.getGrpfncCapitaltotal());
                        // $("#GFSL-span-originalWon").html(mGrpformng.getGrpfncCapitaltotalWon());
                        // $("#GFSL-span-originalWon").attr("number", mGrpformng.getGrpfncCapitaltotal());
                        // $("#GFSL-input-capital").keyup();

                        // /* choose tab */
                        // $(`.GFSL-btn-tab[val="${GFSL.Data.tab}"]`).click();
                    }
                    catch(e)
                    {
                        Common.toast("오류가 발생했습니다.");
                        GFSL.close(true);
                        return;
                    }
                    finally
                    {
                        Common.hideProgress();
                    }
                }, ajaxDelayTime);
            },

            /* ========================= */
            /* close */
            /* ========================= */
            close(force=false)
            {
                if(force == true)
                {
                    Navigation.moveBack();
                    return;
                }
                Navigation.moveBack();
            },
        }

        $(document).ready(function()
        {
            /* ======================== */
            /* event */
            /* ======================== */
            $("#GFSL-btn-addSponsor").click(function() { Navigation.moveFrontPage(Navigation.Page.B1021GrpFinanceSponsorUpdate, { grpno: GFSL.Data.grpno, }); });

            /* ========================= */
            /* page process */
            /* ========================= */

            /* get data from Config */
            try
            {
                GFSL.Data = Navigation.getPageParam();
                Navigation.executeShow();
            }
            catch(e)
            {
                console.error(e);
                GFSL.close(true);
            }

        });

    </script>


</ons-page>