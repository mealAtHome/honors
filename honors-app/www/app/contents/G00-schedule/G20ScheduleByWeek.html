<ons-page id="GSCW">

    <!-- ======================== -->
    <!-- 페이지용 타이틀 -->
    <!-- ======================== -->
    <ons-toolbar>
        <div class="left"><gg-backbtn onclick="GSCW.close(true);"></gg-backbtn></div>
        <div class="center">스케줄(주간)</div>
    </ons-toolbar>

    <!-- ========================= -->
    <!-- 연도별 -->
    <!-- ========================= -->
     <div class="common-div-cushion">
        <p class="common-p-title">
            <span>스케줄 입력현황</span>
        </p>
        <div id="GSCW-div-scheduleall"></div>
    </div>

    <script>
        var GSCW =
        {
            code : "GSCW",
            Data : {},
            isManager : false,

            show()
            {
                /* validation param */
                if(GSCW.Data.sclyear  == undefined) { Common.toastError("잘못된 접근입니다."); GSCW.close(true); return; }
                if(GSCW.Data.sclmonth == undefined) { Common.toastError("잘못된 접근입니다."); GSCW.close(true); return; }
                if(GSCW.Data.sclweek  == undefined) { Common.toastError("잘못된 접근입니다."); GSCW.close(true); return; }

                /* init */
                Common.showProgress();
                setTimeout(function()
                {
                    try
                    {
                        let mSchedulealls = Api.Scheduleall.selectByPM3month();
                        mSchedulealls.makeWeekList("#GSCW-div-scheduleall");
                    }
                    catch(e)
                    {
                        Common.catchProc(e);
                    }
                    Common.hideProgress();
                }, ajaxDelayTime);
            },

            /* ========================= */
            /* close */
            /* ========================= */
            close(force=false)
            {
                if(force == true)
                {
                    Navigation.moveBack();
                    return;
                }
                Navigation.moveBack();
            },
        }

        $(document).ready(function()
        {
            /* ========================= */
            /* event */
            /* ========================= */

            /* =============== */
            /* 저장 */
            /* =============== */
            $("#CUDE-btn-clscancel").click(function()
            {
                // /* set var */
                // let clsno = GSCW.Data.clsno;
                // let grpno = GSCW.Data.grpno;
                // let clscancelreason = $("#CUDE-textarea-clscancelreason").val().trim();

                // /* input check */
                // if(clscancelreason == "") { Common.toastError("취소사유를 입력해주세요."); return; }
                // if(clscancelreason.length > 50) { Common.toastError("취소사유는 50글자 이내로 입력해주세요."); return; }

                // /* process */
                // let process = function()
                // {
                //     Common.showProgress();
                //     setTimeout(function()
                //     {
                //         let mApiResponse = Api.Cls.updateClsstatusToCancel(grpno, clsno, clscancelreason, GGF.none, GGF.toast);
                //         if(mApiResponse.isSuccess())
                //         {
                //             Common.toastSuccess("일정이 취소되었습니다.");
                //             GSCW.close();
                //             return;
                //         }
                //         Common.hideProgress();
                //     }, ajaxDelayTime);
                // };
                // Common.confirm2("일정을 취소하시겠습니까?", process);
            });


            /* ========================= */
            /* page process */
            /* ========================= */

            /* get data from Config */
            try
            {
                GSCW.Data = Navigation.getPageParam();
                Navigation.executeShow();
            }
            catch(e)
            {
                console.error(e);
                GSCW.close(true);
            }

            /* localizing */
            /* $("#GSCW").i18n(); */

        }); /* end function */

    </script>
</ons-page>