<ons-page id="UMHM">

    <!-- =============== -->
    <!-- 헤더 -->
    <!-- =============== -->
    <div class="common-div-cushion">
        <table style="width:100%;">
            <tbody>
                <tr>
                    <td style="text-align:left;">
                        <div>안녕하세요, <span id="UMHM-span-username" class="common-tag-strong" style="vertical-align:bottom;"></span>&nbsp;님</div>
                    </td>
                    <td style="text-align:right;">
                        <button id="UMHM-btn-toManager" class="common-btn-inline  common-tag-fontsize09" style="display:none;">매니저 홈</button>
                        <button id="UMHM-btn-toAdmin"   class="common-btn-inline  common-tag-fontsize09" style="display:none;">관리자 홈</button>
                        <button id="UMHM-btn-logout" class="common-btn-outline common-tag-fontsize09">로그아웃</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- =============== -->
    <!-- 공지사항 -->
    <!-- =============== -->
    <hr class="common-hr-padding"/>
    <div class="common-div-cushion">
        <p class="common-p-title">내 스케줄</p>
        <div id="UMHM-div-"></div>
        <button id="UMHM-btn-manageSchedule" class="common-btn-outline common-tag-fontsize09">일정입력</button>
    </div>


    <!-- =============== -->
    <!-- 공지사항 -->
    <!-- =============== -->
    <hr class="common-hr-padding"/>
    <div class="common-div-cushion">
        <p class="common-p-title">공지사항</p>
        <div id="UMHM-div-systemBoard"></div>
    </div>

    <!-- =============== -->
    <!-- cushion for tab -->
    <!-- =============== -->
    <div class="common-div-cushionFooter"></div>

    <script>
        var UMHM =
        {
            code: "UMHM",
            Data: {},

            /* =============== */
            /* show */
            /* =============== */
            show()
            {
                /* recovery */
                Common.showProgress();
                setTimeout(function()
                {
                    /* 공지사항 조회 */
                    let mSystemBoards = Api.SystemBoard.selectMain();
                    mSystemBoards.makeMainBanners("#UMHM-div-systemBoard");

                    /* 그룹매니저 여부 조회 */
                    let mGrps = Api.Grp.selectManaging();
                    if(mGrps.getModels().length > 0)
                        $("#UMHM-btn-toManager").show();

                    /* 내 정보 조회 */
                    let mUser = Api.User.selectMe().getModel();
                    $("#UMHM-span-username").text(`${mUser.getName()}`);
                    // mUsers.make("#UMHM-div-userInfo");

                    Common.hideProgress();
                }, ajaxDelayTime);

                // GGinitPage.setCartFab();
            },

            close()
            {
                Common.confirmExit();
            }
        };

        $(document).ready(function()
        {
            /* ======================== */
            /* set event */
            /* ======================== */
            /* $("#UMHM-btn-toAdmin").click(function() { Navigation.moveFrontPage(Navigation.Page.B01BizRegist, {}); }); */
            $("#UMHM-btn-toManager").click(function() { GGstorage.clearPageStack(); Navigation.moveFrontPage(Navigation.Page.B10ManagerChooseGrp, {}); });
            $("#UMHM-btn-test-newCls").click(function() { Navigation.moveFrontPage(Navigation.Page.F10ClassUpdate000Default, {grpno: 'GCYHTRMLKYLEXMELLYTWCUBWAWALXD'}); });
            $("#UMHM-btn-manageSchedule").click(function() { Navigation.moveFrontPage(Navigation.Page.G10ScheduleByYear); });

            /* ------------ */
            /* logout */
            /* ------------ */
            $("#UMHM-btn-logout").click(function()
            {
                /* 로그아웃 함수 정의 */
                let logout = function()
                {
                    GGstorage.logout();
                };

                /* 로그아웃 실시 */
                Common.confirm
                ({
                    title : "로그아웃",
                    msg : "로그아웃하시겠습니까?",
                    okCallback : logout
                });
            });

            /* ========================= */
            /* page process */
            /* ========================= */

            /* get data from Config */
            try
            {
                UMHM.Data = Navigation.getPageParam();
                Navigation.executeShow();
            }
            catch(e)
            {
                console.error(e);
                UMHM.close(true);
            }

            /* localizing */
            /* $("#UMHM").i18n(); */

        }); /* end ready */
    </script>
</ons-page>