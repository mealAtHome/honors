<ons-page id="MBKL">

    <!-- ======================== -->
    <!-- 페이지 타이틀 -->
    <!-- ======================== -->
    <ons-toolbar>
        <div class="left"><gg-backbtn onclick="MBKL.close(true);"></gg-backbtn></div>
        <div class="center"><span data-i18n="(MBKL)choose_addr">은행계좌관리</span></div>
    </ons-toolbar>

    <!-- ======================== -->
    <!-- 새로운 엔티티 추가 -->
    <!-- ======================== -->
    <style>
        #MBKL-btn-newEntity
        {
            width:15em;
            max-width:70%;
            font-size:1em;
            padding:0.6em;
        }
    </style>
    <div class="common-div-cushion common-tag-marginTop10 common-tag-textCenter">
        <button id="MBKL-btn-newEntity" class="common-btn-outline">＋ 새로운 은행계좌 추가</button>
    </div>

    <!-- ======================== -->
    <!-- 엔티티 리스트 -->
    <!-- ======================== -->
    <div id="MBKL-div-entityList" class="common-div-scrollX"></div>

    <script>
        var MBKL =
        {
            code : "MBKL",

            /* 페이지 데이터 */
            Data :
            {
            },

            show()
            {
                if(MBKL.Data.grpno == undefined) { Common.toast("잘못된 접근입니다."); MBKL.close(); return; }

                Common.showProgress();
                setTimeout(function()
                {
                    let mBankaccounts = Api.Bankaccount.selectByExecutorForGrp(MBKL.Data.grpno, "none", "toast");
                    mBankaccounts.make("#MBKL-div-entityList");

                    Common.hideProgress();
                }, ajaxDelayTime);
            },

            /* ========================= */
            /* close */
            /* ========================= */
            close(force=false)
            {
                if(force == true)
                {
                    Navigation.moveBack();
                    return;
                }
                Navigation.moveBack();
            },

        }

        $(document).ready(function()
        {
            /* ========================= */
            /* event */
            /* ========================= */
            $("#MBKL-btn-newEntity").click(function() { Navigation.moveFrontPage(Navigation.Page.B82ManagerBankacctUpdate, {grpno: MBKL.Data.grpno}); });

            /* ========================= */
            /* page process */
            /* ========================= */

            /* get data from Config */
            try
            {
                MBKL.Data = Navigation.getPageParam();
                Navigation.executeShow();
            }
            catch(e)
            {
                console.error(e);
                MBKL.close(true);
            }

            /* localizing */
            /* $("#MBKL").i18n(); */

        }); /* end function */

    </script>
</ons-page>